<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Video Overlay</title>
<style>
body{ margin:0; background:transparent; color:white; overflow:hidden; font-family:sans-serif; }
#overlay { position:relative; width:100%; height:100vh; display:flex; flex-direction:column; justify-content:center; align-items:center; text-align:center; }
video{ max-width:90%; max-height:80%; border:3px solid white; border-radius:12px; }
#message{ margin-top:12px; font-size:1.5em; background:rgba(0,0,0,0.4); padding:6px 12px; border-radius:8px; }
</style>
</head>
<body>
<div id="overlay">
  <video id="video-player" controls autoplay></video>
  <div id="message"></div>
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
<script>
const firebaseConfig = {
  apiKey: "AIzaSyBiDe-6X-nKUfAgwWWWriI2U9wpNpQ9hk8",
  authDomain: "toiden.firebaseapp.com",
  databaseURL: "https://toiden-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "toiden",
  storageBucket: "toiden.firebasestorage.app",
  messagingSenderId: "696461176231",
  appId: "1:696461176231:web:2120f172e52eaba91a1a82"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

const ROOM = "tobrothertoiden";
const overlayRef = db.ref(`rooms/${ROOM}/overlay`);
const video = document.getElementById("video-player");
const msgDiv = document.getElementById("message");

overlayRef.on("value",(snap)=>{
  const item = snap.val();
  if(!item) return;
  msgDiv.textContent = item.msg || '';
  if(item.type==="youtube"){
    video.src = `https://www.youtube.com/embed/${item.ytid}?autoplay=1`;
    video.setAttribute("controls", false);
  }else{
    video.src = item.url;
    video.setAttribute("controls", true);
  }
});
</script>
</body>
</html>
