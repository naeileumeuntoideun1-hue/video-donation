<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Video Donation Overlay</title>
<style>
  body{margin:0;background:transparent;display:flex;align-items:center;justify-content:center;overflow:hidden;height:100vh;}
  #player{width:100%;height:100%;position:relative;}
  iframe, video{width:100%;height:100%;border:none;}
</style>
</head>
<body>
<div id="player"></div>
<script>
window.addEventListener('message', e=>{
  const msg = e.data;
  if(msg.action==='play' && msg.item){
    const item = msg.item;
    const $player = document.getElementById('player');
    $player.innerHTML='';
    if(item.type==='youtube' && item.ytid){
      const iframe=document.createElement('iframe');
      iframe.src = `https://www.youtube.com/embed/${item.ytid}?autoplay=1&mute=0`;
      iframe.allow='autoplay; encrypted-media';
      $player.appendChild(iframe);
    } else if(item.type==='html5'){
      const v=document.createElement('video');
      v.src=item.url; v.autoplay=true; v.controls=true; v.muted=false; v.playsInline=true;
      $player.appendChild(v);
    } else if(item.type==='twitch'){
      const iframe=document.createElement('iframe');
      const clipId = new URL(item.url).pathname.split('/').pop();
      iframe.src = `https://clips.twitch.tv/embed?clip=${clipId}&parent=${location.hostname}&autoplay=true&muted=false`;
      iframe.allow='autoplay';
      $player.appendChild(iframe);
    } else {
      $player.textContent='지원되지 않는 영상입니다.';
    }
  }
});
</script>
</body>
</html>
